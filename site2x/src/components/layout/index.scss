@import './../../styles/base';
@import './../../styles/variables';
@import './../../styles/mixins';

// To get work done quickly, nested all styles here

section.layout-container {
  @include fixed-stretch();
  overflow: hidden;
  display: flex;

  >aside {
    @include flex-column();
    flex-shrink: 0;
    background-color: $bg-secondary;
    color: $fg-secondary;
    max-width: 275px;
    padding-left: 1rem;
    position: relative;
    transition: all 2ms;

    &:after{
      content: '\2630';
      position: absolute;
      right: -40px;
      top: 0;
      padding: 15px;
      background-color: $bg-secondary;
      opacity: 0;
    }

    >div.logo {
      flex-shrink: 0;
    }

    >nav {
      @include flex-scroll-container();

      >ul {
        @include reset-list();
        >li {
          transition: all ease;
          a {
            @include header-style($fg-secondary);
            text-transform: uppercase;
            font-size: 0.83em;
            position: relative;
            &:hover {
              color: $accent;
            }
            &.active{
              color: $accent;
              &::after{
                opacity: 1;
              }
            }
            &.parent-item{
              color: currentColor;
            }
            &::after{
              content: '';
              right: 0;
              top: -10px;
              height: 30px;
              position: absolute;
              width: 7px;
              background-color: $accent;
              opacity: 0;
            }
          }
          >ul {
            @include reset-list();
            padding-inline-start: 1rem;
            padding-inline-end: 0rem;
            >li {
              >a {
                text-transform: capitalize;
                padding-right: 1rem;
              }
            }
          }
        }
      }
    }
  }

  >main {
    @include flex-column();
    @include flex-scroll-container();
    flex: 1;
    color: $fg-primary;
    line-height: 1.5;
    padding: 0 6rem;

    .page-container {
      @include page-container-default-styles;

      // Styles for rules page
      &.page-rules{
        .rules-listing {
          counter-reset: rule-item; 
          
          >article {
            border: 1px solid $sep;
            padding: 0.5rem;
            display: flex;
            flex-direction: row;
            position: relative;
            background-color: $bg-primary;

            &:nth-child(2n) {
              background-color: lighten($sep, 2%);
              &::before{
                background-color: lighten($sep, 2%);
              }
            }

            // Index/ counter
            &:before {
              counter-increment: rule-item;
              content: counter(rule-item); 
              position: absolute;
              width: 30px;
              left: -31px;
              top: -1px;
              border: 1px solid $sep;
              border-right: none;
              font-weight: bold;
              text-align: center;
              padding: 11px 0;
              background-color: $bg-primary;
            }

            &:hover{
              border: 1px solid $accent;
              &::before{
                border-color: $accent;
              }
            }

            div.meta {
              font-size: 80%;
              span.heading {
                padding: 0.25rem 0.5rem;
                border: 1px solid $sep;
                text-transform: uppercase;
                font-weight: bold;
                display: inline;
              }
              a.sc-item {
                background-color: $sep;
                border: 1px solid $bg-primary;
                cursor: pointer;
                text-decoration: none;
                padding: 0.25rem 0.5rem;
                text-transform: uppercase;
                display: inline-block;
                &:hover {
                  color: $accent;
                }
              }
            }

            >main {
              flex: 1;
              >a{
                text-decoration: none;
              }
              h2{
                margin: 0;
                margin-bottom: 0.5rem;
              }
              &:last-child{
                border-bottom: none;
              }
              p {
                font-weight: bold;
              }
            }

            >aside {
              border-left: 1px solid $sep;
              div.meta{
                span.heading{
                  display: inline-block;
                  background-color: $sep;
                }
                a.sc-item {
                  display: block;
                  background-color: transparent;
                }
              }
            }
          }
        }
      }
    }


    // Style for a rule page
    .page-rule {
      display: flex;
      @include page-container-default-styles;
      align-items: flex-start;
      padding-right: 250px;

      main {
        flex: 1;
        padding-bottom: 6rem;
      }

      aside.toc {
        flex: inherit;
        position: fixed;
        right: 0;
        top: 0;
        border-left: 1px solid $sep;
        max-width: 250px;
        overflow: auto;
        height: 100%;
        bottom: 0;
        padding-right: 1.5rem;
        font-size: 90%;

        span.heading {
          padding: 0.25rem 0.5rem;
          @include header-style($fg-primary);
          text-transform: uppercase;
          font-size: 80%;
          background-color: $sep;
          margin: 1.5rem 0.5rem 0.5rem 0;
          display: inline-block;
        }

        ul{
          @include reset-list;
          margin: 0.5rem 0;
          &.meta-data{
            margin-top: 6rem;
          }
          li {
            span, a {
              display: inline-block;
            }
            p{
              margin: 0 0 0 0.5rem;
              text-transform: uppercase;
            }
            a{
              cursor: pointer;
              text-decoration: none;
              padding: 0.25rem 0.5rem;
              text-transform: uppercase;
              display: block;
              &:hover {
                color: $accent;
              }
            }
          }
          ul {
            margin-left: 1rem;
          }
        }
      }
    }
  
  } 

}


/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-width : 320px) 
and (max-width : 480px) {
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (max-width : 1024px) {
  section.layout-container {
    >aside{
      position: absolute;
      left: -220px;
      top: 0;
      bottom: 0;
      max-width: 230px;
      display: table;
      z-index: 1;
      &:after{
        opacity: 1;
      }
      &:hover{
        left: 0;
        &::after{
          color: $accent;
        }
      }
    }
    >main{
      .page-container {
        &.page-rules{
          .rules-listing {
            >article {
              flex-direction: column;
            }
          }
        }
      }
    }
  }
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
}